# vim:syntax=apparmor

#include <tunables/global>

/home/benchmarker/scipy-bench-setup/bin/run-cmd-user {
  #include <abstractions/base>
  #include <abstractions/nameservice>
  #include <abstractions/python>

  owner /dev/shm/ r,
  owner /dev/shm/* rwmlk,

  # allow
  /home/benchmarker/scipy-bench-setup/bin/run-cmd-user r,
  /home/benchmarker/scipy-bench-setup/hostname r,

  # allowed points
  /home/benchmarker/scipy-bench-setup/var/ rw,
  /home/benchmarker/scipy-bench-setup/var/** rwklmix,
  /home/benchmarker/scipy-bench-setup/doc/ rw,
  /home/benchmarker/scipy-bench-setup/doc/** rw,
  /home/benchmarker/scipy-bench-setup/html/ rw,
  /home/benchmarker/scipy-bench-setup/html/** rw,
  /home/benchmarker/scipy-bench-setup/results/ rw,
  /home/benchmarker/scipy-bench-setup/results/** rw,
  /home/benchmarker/scipy-bench-setup/scipy-bench/results/ rw,
  /home/benchmarker/scipy-bench-setup/scipy-bench/results/** rw,

  /etc/ r,
  /etc/debian_version r,
  /etc/lsb-release r,
  /etc/os-release r,
  /usr/lib/os-release r,

  /etc/mime.types r,
  /etc/ld.so.conf r,

  /usr/local/bin/f90cache rmix,
  /usr/local/lib/f90cache/ r,
  /usr/local/lib/f90cache/** rmix,
  /usr/lib/ccache/ r,
  /usr/lib/ccache/** rmix,

  /usr/include/ r,
  /usr/include/** r,

  /usr/share/python-wheels/ r,
  /usr/share/python-wheels/** r,

  /usr/bin/ r,
  /usr/bin/* rmix,
  /bin/* rmix,
  /usr/lib/** rmix,
  /lib/** rmix,

  /proc/*/status r,
  /proc/*/auxv r,
  /proc/*/cmdline r,
  /proc/*/environ r,
  /proc/*/mem rw,
  /proc/*/task/ r,
  /proc/*/task/** r,
  /proc/*/task/*/comm rw,
  /proc/version r,
  /proc/modules r,
}
